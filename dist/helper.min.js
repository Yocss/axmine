/**
 * @axmine/helper v1.0.5
 * (c) 2019-2020 yocss https://github.com/yocss/axmine.git
 * License: MIT
 * Released on: Aug 21, 2020
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).helper=t()}(this,function(){"use strict";function g(e){return Object.prototype.toString.call(e).slice(8,-1).toLocaleLowerCase()}var s,e;(e=s||(s={})).localStorage="localStorage",e.sessionStorage="sessionStorage",e.cookie="cookie";var t=function(){function e(){}return e.prototype.set=function(e,t,o){void 0===o&&(o={});var r=Object.assign({expireDays:7,type:s.localStorage},o),n=r.type,i=r.expireDays;return"cookie"===n?this.setCookie(e,t,i):this.setStorage(e,t,i,n)},e.prototype.get=function(e,t){return void 0===t&&(t=s.localStorage),"cookie"===t?this.getCookie(e):this.getStorage(e,t)},e.prototype.remove=function(e,t){return void 0===t&&(t=s.localStorage),"cookie"===t?this.removeCookie(e):this.removeStorage(e,t)},e.prototype.setStorage=function(e,t,o,r){void 0===o&&(o=7),void 0===r&&(r=s.localStorage);var n=!(!window||!window[r]);if(n){var i=0<o?1*(new Date).getTime()+864e5*o:0,a=JSON.stringify({v:t,t:i});window[r].setItem(e,a),n=this.getStorage(e)===t}return n},e.prototype.getStorage=function(e,t){void 0===t&&(t=s.localStorage);var o="";if(window&&window[t]){var r=window[t].getItem(e)||'{"v":\'\',"t":0}',n=JSON.parse(r),i=(new Date).getTime();o=n.v,"localStorage"===t&&0<n.t&&i>n.t&&(o="",this.removeStorage(e))}return o},e.prototype.removeStorage=function(e,t){void 0===t&&(t=s.localStorage);var o=!(!window||!window[t]);return o&&(window[t].removeItem(e),o=""===this.getStorage(e)),o},e.prototype.setCookie=function(e,t,o){void 0===o&&(o=7);var r=window&&window.navigator.cookieEnabled;if(r){var n=new Date;n.setDate(n.getDate()+o);var i=o?";expires="+n.toUTCString():"";document.cookie=e+"="+escape(t)+i,r=this.getCookie(e)===t}return r},e.prototype.getCookie=function(e){var t="";if(window&&window.navigator.cookieEnabled&&0<document.cookie.length){var o=document.cookie.indexOf(e+"=");if(0<=o){o=o+e.length+1;var r=document.cookie.indexOf(";",o);-1===r&&(r=document.cookie.length),t=unescape(document.cookie.substring(o,r))}}return t},e.prototype.removeCookie=function(e){var t=window&&window.navigator.cookieEnabled;return t&&(t=!!this.getCookie(e))&&this.setCookie(e,"",-1),t},e}(),d=["required","len","min","max","enum","type","pattern","validator"];function u(e,t){var o={status:!0,message:e.message||""},r=Object.keys(e),n=g(t),i=!1,a=/^\s+$/.test(t)||["",void 0,null].includes(t);if(r.includes("required")&&e.required&&(o.status=!a,i=!0===e.required),!(!i&&a)&&o.status)for(var s=0;s<r.length;s++){var u=e[r[s]];if(d.includes(r[s]))switch(r[s]){case"len":o.status=t.length===1*u;break;case"min":o.status="number"===n?u<=t:t.length>=u;break;case"max":o.status="number"===n?t<=u:t.length<=u;break;case"enum":o.status=u.includes(t);break;case"type":o.status=u.toLowerCase()===n;break;case"pattern":var c=new RegExp(u);o.status=c.test(t);break;case"validator":if("function"!==g(u))throw new Error("validator 不是一个函数");o.status=u(t)}if(!o.status)break}return o}return{formatDate:function(e,t){void 0===t&&(t="y-m-d h:i");var o=new Date(1e3*e);function r(e){return e<10?"0"+e:e.toString()}return t.replace(/\w/g,function(e){var t=e.toLowerCase();return{y:o.getFullYear(),m:r(o.getMonth()+1),d:r(o.getDate()),h:r(o.getHours()),i:r(o.getMinutes()),s:r(o.getSeconds()),w:["天","一","二","三","四","五","六"][o.getDay()]}[t]||""})},getType:g,store:new t,validate:function(i,a){var s={status:!0,infos:[]};return Object.keys(i).forEach(function(e){for(var t=[].concat(i[e]),o=a[e],r=0;r<t.length;r++){var n=u(t[r],o);if(!n.status){s.infos.push({message:n.message,key:e});break}}}),s.status=s.infos.length<1,s}}});
